#define nfree(ptr) do { if (ptr != NULL) { free(ptr); ptr = NULL; } } while (0)